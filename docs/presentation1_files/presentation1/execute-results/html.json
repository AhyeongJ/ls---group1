{
  "hash": "f2156d26428179e5b4186d24572d9808",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Presentation2\"\nauthor: Ahyeong Jeong\ndate: \"2024-07-17\"\ncategories: [Presentation]\n---\n\n#### 필요한 패키지 불러오기\n\n::: {#18d7cd8b .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n```\n:::\n\n\n#### 데이터 불러오기\n\n::: {#f26d3fc7 .cell execution_count=2}\n``` {.python .cell-code}\nmarket = pd.read_excel(\"C:/Users/User/Documents/LS 빅데이터 스쿨/ls_group1/data/traditionalmarket.xlsx\")\nmarket2 = market.copy()\n```\n:::\n\n\n#### 변수명 재설정하기\n\n::: {#9b8b0a62 .cell execution_count=3}\n``` {.python .cell-code}\nmarket2 = market2.rename(columns = {\"시장명\" : \"market_name\", \n                                    \"시장유형\" : \"type\",\n                                    \"소재지도로명주소\" : \"adress_road\",\n                                    \"시장개설주기\" :  \"open_period\",\n                                    \"소재지지번주소\" : \"address_old\",\n                                    \"점포수\" : \"market_count\",\n                                    \"사용가능상품권\" : \"certificate\",\n                                    \"공중화장실 보유여부\" :\"public_toilet\",\n                                    \"주차장 보유여부\" : \"parking_lot\",\n                                    \"개설년도\" : \"year\",\n                                    \"데이터기준일자\" : \"data_date\"})\n```\n:::\n\n\n#### 변수별 요약통계량과 정보 확인하기\n\n1.  시장데이터 중복 없는가?\n\n::: {#f1c0edfb .cell execution_count=4}\n``` {.python .cell-code}\n# 중복된 데이터 추출\nmarket2[market2['market_name'].duplicated(keep=False)]['market_name'] \n# keep = False :첫 번째 항목과 마지막 항목을 포함하여 모든 중복 항목을 중복으로 간주 \n# 시장 이름은 같고 도로명 주소는 다름, 다른 시장 \n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```\n0       중앙시장\n26      자유시장\n27      중앙시장\n72      양곡시장\n76      중앙시장\n        ... \n1414    중앙시장\n1416    북부시장\n1418    사직시장\n1419    사창시장\n1436    남부시장\nName: market_name, Length: 110, dtype: object\n```\n:::\n:::\n\n\n2.  시장 유형 빈도 실펴보기\n\n::: {#79636b48 .cell execution_count=5}\n``` {.python .cell-code}\nmarket2['type'].value_counts()\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\ntype\n상설       1002\n상설+정기     259\n정기        178\nName: count, dtype: int64\n```\n:::\n:::\n\n\n3.  소재지도로명주소에서 시/도 만 추출해서 파생변수 region 생성\n\n::: {#7ac6032a .cell execution_count=6}\n``` {.python .cell-code}\nmarket2['adress_road'].isna().sum()\nmarket2['region'] = market2['adress_road'].str.split().str[0]\nmarket2.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>market_name</th>\n      <th>type</th>\n      <th>adress_road</th>\n      <th>open_period</th>\n      <th>address_old</th>\n      <th>market_count</th>\n      <th>certificate</th>\n      <th>public_toilet</th>\n      <th>parking_lot</th>\n      <th>year</th>\n      <th>data_date</th>\n      <th>region</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>중앙시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 금성로 21</td>\n      <td>상설</td>\n      <td>강원 강릉시 성남동 50번지</td>\n      <td>229</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>1980.0</td>\n      <td>2015-12-31</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>강릉동부시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 옥천로 48</td>\n      <td>상설</td>\n      <td>강원 강릉시 옥천동 223번지</td>\n      <td>91</td>\n      <td>NaN</td>\n      <td>Y</td>\n      <td>N</td>\n      <td>2014.0</td>\n      <td>2015-12-31</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>강릉서부시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 임영로 155번길 6</td>\n      <td>상설</td>\n      <td>강원 강릉시 용강동 29번지</td>\n      <td>109</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>1977.0</td>\n      <td>2015-12-31</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>주문진종합시장</td>\n      <td>상설+정기</td>\n      <td>강원도 강릉시 주문진읍 구 시장길</td>\n      <td>5일</td>\n      <td>강원 강릉시 주문진읍 주문리 321-52번지</td>\n      <td>77</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2006.0</td>\n      <td>2015-12-31</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>주문진수산시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 주문진읍 시장1길 4-1</td>\n      <td>상설</td>\n      <td>강원 강릉시 주문진읍 주문리 312-91번지</td>\n      <td>42</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2007.0</td>\n      <td>2015-12-31</td>\n      <td>강원도</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n4.  점포수\n\n::: {#338dadac .cell execution_count=7}\n``` {.python .cell-code}\n# 점포 수 요약통계량 \nmarket2[\"market_count\"].describe().round(2)\nmarket2.iloc[market2[\"market_count\"].idxmax(),2]\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```\n'서울특별시 중구 남대문시장 4길 21'\n```\n:::\n:::\n\n\n![](images/화면%20캡처%202024-07-17%20204543.png)\n\n오 이상치가 전혀 아니군 ...!\n\nmarket_scale 파생변수 생성과 막대그래프 확인\n\n::: {#19a8d2ed .cell execution_count=8}\n``` {.python .cell-code}\nplt.clf()\n# 점포수의 제 1 사분위: 50, 제 3 사분위 134 기준으로 makret_scale 생성 \nmarket2 = market2.assign(market_scale = np.where(market2[\"market_count\"] >= 134, \"large\",\n                                        np.where(market2[\"market_count\"] >= 50, \"medium\", \"small\")))\nsns.countplot(data = market2, x = 'market_scale', hue = 'market_scale')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](presentation1_files/figure-html/cell-9-output-1.png){width=593 height=429}\n:::\n:::\n\n\n온누리 상품권 빈도\n\n::: {#7a9c42a0 .cell execution_count=9}\n``` {.python .cell-code}\nmarket2['certificate'].value_counts()\n```\n\n::: {.cell-output .cell-output-display execution_count=9}\n```\ncertificate\n온누리상품권    1159\nName: count, dtype: int64\n```\n:::\n:::\n\n\n공중화장실 보유여부\n\n::: {#631836f3 .cell execution_count=10}\n``` {.python .cell-code}\nmarket2['public_toilet'].value_counts()\nmarket2['parking_lot'].value_counts()\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```\nparking_lot\nY    859\nN    580\nName: count, dtype: int64\n```\n:::\n:::\n\n\nconv_level 파생변수 생성과 막대그래프 확인 **conv_level 재수정할까?(화장실은 대부분 있는데, 주차장은 60%임)** *yes no no yes 현황 파악 다시 하기*\n\n::: {#7fac8fd1 .cell execution_count=11}\n``` {.python .cell-code}\nplt.clf()\nmarket2['conv_level'] = np.where((market2['public_toilet'] == 'Y') & (market2['parking_lot'] == 'Y'), 'high', \n                   np.where((market2['public_toilet'] == 'N') & (market2['public_toilet'] == 'N') , 'low', 'intermediate'))\nmarket2['conv_level'].value_counts()\nsns.countplot(data = market2, x = 'conv_level', hue = 'conv_level')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](presentation1_files/figure-html/cell-12-output-1.png){width=593 height=429}\n:::\n:::\n\n\n::: {#ff364930 .cell execution_count=12}\n``` {.python .cell-code}\nn_year = market2.groupby('year', as_index = False).agg(n = (\"year\", \"count\"))\nn_year\nsns.lineplot(data = n_year, x = \"year\", y = \"n\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](presentation1_files/figure-html/cell-13-output-1.png){width=609 height=429}\n:::\n:::\n\n\n",
    "supporting": [
      "presentation1_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}